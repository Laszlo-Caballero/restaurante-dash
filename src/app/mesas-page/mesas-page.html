<app-title
  title="Gestión de Mesas"
  subtitle="Administra las mesas de tu restaurante de manera eficiente."
>
  <app-tooltip
    text="Solo Administradores"
    [position]="PositionTooltip.BOTTOM"
    [disable]="authService.isAdmin()"
  >
    <app-button (click)="openCreateMesa()" [disabled]="!authService.isAdmin()">
      Añadir Nueva Mesa
    </app-button>
  </app-tooltip>
</app-title>

<div class="flex flex-col gap-y-5 p-4">
  <header class="grid grid-cols-4 gap-4">
    <div class="p-4 rounded-2xl border flex flex-col border-gray-400">
      <p class="font-semibold text-gray-400">Mesas Totales</p>
      <h1 class="text-2xl font-bold">32</h1>
    </div>
    <div class="p-4 rounded-2xl border flex flex-col border-gray-400">
      <p class="font-semibold text-gray-400">Disponibles ahora</p>
      <h1 class="text-2xl font-bold">12</h1>
    </div>
    <div class="p-4 rounded-2xl border flex flex-col border-gray-400">
      <p class="font-semibold text-gray-400">Ocupados</p>
      <h1 class="text-2xl font-bold">18</h1>
    </div>
    <div class="p-4 rounded-2xl border flex flex-col border-gray-400">
      <p class="font-semibold text-gray-400">Reservados</p>
      <h1 class="text-2xl font-bold">2</h1>
    </div>
  </header>

  <section class="w-full grid grid-cols-4 gap-4 border border-slate-300 rounded-3xl p-4">
    @for(mesa of mesas(); track mesa.mesaId){
    <app-card-table
      [tableNumber]="mesa.numeroMesa"
      [capacity]="mesa.capacidad"
      [status]="mesa.disponible"
      (click)="openEDMesa(mesa)"
    />
    }
  </section>
</div>

@if(isLoading()){
<app-load />
} @if(isOpenCreateMesa()){
<app-create-mesa [onClose]="closeCreateMesa" />
} @if(isOpenEDMesa()){
<app-modal-options-mesa [mesa]="selectedMesa()!" [onClose]="closeEDMesa" />
}
